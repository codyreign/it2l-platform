<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:th="http://www.thymeleaf.org"
      xmlns:tiles="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org"
      lang="en">	  
 	<head>
		<meta name="google" value="notranslate"/> 
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>Unity Web Player | WebPlayer</title>
	</head>
	<body tiles:fragment="content">
		<table id="taskContainer">
        	<tr>
        		<td>
					<font face="Comic Sans MS"><h1 align="center">Make three fractions that are equivalent to 1/2.</h1>
					</font>
				</td>
			</tr>
		</table>
<!-- 		<p class="header"><span>Unity Web Player | </span>WebPlayer</p> -->
		<div class="content">
			<div id="unityPlayer">
				<div class="missing">
					<a href="http://unity3d.com/webplayer/" title="Unity Web Player. Install now!">
						<img alt="Unity Web Player. Install now!" src="http://webplayer.unity3d.com/installation/getunity.png" width="193" height="63" />
					</a>
				</div>
			</div>
<!-- 			<input type="submit" value="LOW" onClick="SendLowMessage('Test sending LOW feedback');" /><br/> -->
<!-- 			<input type="submit" value="HIGH" onClick="SendHighMessage('Test sending HIGH feedback');" /> -->
		</div>
		<input type="hidden" id="AJAX" name="AJAX" value="on"/>
		<div id="player"></div>
		
		
		<script type='text/javascript' src='https://ssl-webplayer.unity3d.com/download_webplayer-3.x/3.0/uo/jquery.min.js'></script>
		<script type="text/javascript">
		<!--
		var unityObjectUrl = "http://webplayer.unity3d.com/download_webplayer-3.x/3.0/uo/UnityObject2.js";
		if (document.location.protocol == 'https:')
			unityObjectUrl = unityObjectUrl.replace("http://", "https://ssl-");
		document.write('<script type="text\/javascript" src="' + unityObjectUrl + '"><\/script>');
		-->
		</script>
		<script type="text/javascript">
		<!--
			var config = {
				width: 800,
				height: 600,
				params: { enableDebugging:"0" }

			};
			config.params["disableContextMenu"] = true;
			var u = new UnityObject2(config);

			jQuery(function() {

				var $missingScreen = jQuery("#unityPlayer").find(".missing");
				var $brokenScreen = jQuery("#unityPlayer").find(".broken");
				$missingScreen.hide();
				$brokenScreen.hide();
				$.ajaxSetup({
                    timeout: 0,
                    cache: false
                });
                $.getJSON("http://www.cstr.ed.ac.uk/cgi-bin/cstr/festivalspeak.cgi?callback=?", {
                        voice: 'nick2',
                        UserText: 'Make three fractions that are equivalent to 1/2',
                        AJAX: $("#AJAX").val()
                    },
                    callback
                );

				u.observeProgress(function (progress) {
					switch(progress.pluginStatus) {
						case "broken":
							$brokenScreen.find("a").click(function (e) {
								e.stopPropagation();
								e.preventDefault();
								u.installPlugin();
								return false;
							});
							$brokenScreen.show();
						break;
						case "missing":
							$missingScreen.find("a").click(function (e) {
								e.stopPropagation();
								e.preventDefault();
								u.installPlugin();
								return false;
							});
							$missingScreen.show();
						break;
						case "installed":
							$missingScreen.remove();
						break;
						case "first":
						break;
					}
				});
				u.initPlugin(jQuery("#unityPlayer")[0], "FractionsLab.unity3d");
			});

			function SendHighMessage(message)
			{
				var json = "{\"method\": \"HighFeedback\", \"parameters\": {\"message\": \"" + message +"\"}}";
				u.getUnity().SendMessage("ExternalInterface", "SendEvent", json);
			}

			function SendLowMessage(message)
			{
				var json = "{\"method\": \"LowFeedback\", \"parameters\": {\"message\": \"" + message +"\"}}";
				u.getUnity().SendMessage("ExternalInterface", "SendEvent", json);
			}
			function readFestival(message) {
				$.ajaxSetup({
                   timeout: 0,
                   cache: false
               });
               $.getJSON('http://www.cstr.ed.ac.uk/cgi-bin/cstr/festivalspeak.cgi?callback=?', {
					   voice: 'nick2',
                       UserText: message,
                       AJAX: $('#AJAX').val()
                   },
                   callback
               );
               return false;
	        }

           function callback(data, status) {
               $('#player').html('<embed src=' + data['wavurl'] + ' autostart=true >');
           }

		-->
		</script>
		<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js'></script>
    	<script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js'></script>
    	<script src='js/scripts/strophe.js'></script>
    	<script src='js/scripts/flXHR.js'></script>
    	<script src='js/scripts/strophe.flxhr.js'></script>
		<script src='js/monitorWOZClient.js'></script>
		<script src="http://www.google.com/jsapi" type="text/javascript" charset="utf-8"></script>
	</body>
</html>
